<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë©˜ë¸ë¦¬ì˜ˆí”„ ë‹¤ì´ìŠ¤ ì‹œë®¬ë ˆì´í„°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #0f172a; /* bg-slate-900 */
            background-image: linear-gradient(to bottom right, #111827, #1e293b);
        }
        .font-orbitron {
            font-family: 'Orbitron', sans-serif;
        }
        .header-glow {
            text-shadow: 0 0 8px rgba(96, 165, 250, 0.6), 0 0 20px rgba(59, 130, 246, 0.4);
        }
        /* ì»¤ìŠ¤í…€ ì²´í¬ë°•ìŠ¤ ìŠ¤íƒ€ì¼ */
        .dice-checkbox:checked + label {
            background-color: #3b82f6; /* bg-blue-600 */
            border-color: #60a5fa; /* border-blue-400 */
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
        }
        .dice-checkbox:checked + label .dice-icon {
            transform: scale(1.1) rotate(15deg);
        }
        /* ì»¤ìŠ¤í…€ í† ê¸€ ìŠ¤ìœ„ì¹˜ ìŠ¤íƒ€ì¼ */
        .toggle-checkbox:checked + .toggle-label {
            background-color: #3b82f6; /* bg-blue-600 */
        }
        .toggle-checkbox:checked + .toggle-label .toggle-ball {
            transform: translateX(100%);
        }
        /* ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1f2937; /* bg-gray-800 */
        }
        ::-webkit-scrollbar-thumb {
            background: #4b5563; /* bg-gray-600 */
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #6b7280; /* bg-gray-500 */
        }
    </style>
</head>
<body class="text-white antialiased">

    <div class="container mx-auto p-4 md:p-8 max-w-5xl">
        
        <!-- í—¤ë” -->
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold font-orbitron tracking-wider header-glow">
                <span class="text-blue-400">Mendeleev</span> Dice
            </h1>
            <p class="text-gray-400 mt-2">ë³´ë“œê²Œì„ìœ¼ë¡œ ë°°ìš°ëŠ” í™”í•™</p>
        </header>

        <!-- ì»¨íŠ¸ë¡¤ íŒ¨ë„ -->
        <div class="bg-gray-800/50 backdrop-blur-sm rounded-2xl p-6 mb-8 shadow-xl shadow-blue-900/10 border border-gray-700">
            <h2 class="text-xl font-bold mb-4 border-b border-gray-700 pb-2">ğŸ² ì£¼ì‚¬ìœ„ ì„ íƒ</h2>
            <div id="dice-selector" class="grid grid-cols-3 sm:grid-cols-4 md:grid-cols-7 gap-4 mb-6">
                <!-- ì£¼ì‚¬ìœ„ ë²„íŠ¼ì€ JSë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
            </div>

            <div class="flex flex-col md:flex-row justify-between items-center gap-6">
                <!-- í† ê¸€ ê·¸ë£¹ -->
                <div class="flex flex-wrap justify-center gap-x-6 gap-y-4">
                    <div class="flex items-center space-x-3">
                        <input type="checkbox" id="operator-toggle" class="toggle-checkbox hidden">
                        <label for="operator-toggle" class="toggle-label flex items-center cursor-pointer w-14 h-8 bg-gray-700 rounded-full p-1 transition-colors duration-300 ease-in-out">
                            <div class="toggle-ball w-6 h-6 bg-white rounded-full shadow-md transform transition-transform duration-300 ease-in-out"></div>
                        </label>
                        <span class="font-semibold text-lg">Ã—, Ã· í¬í•¨</span>
                    </div>
                     <div class="flex items-center space-x-3">
                        <input type="checkbox" id="combo-toggle" class="toggle-checkbox hidden">
                        <label for="combo-toggle" class="toggle-label flex items-center cursor-pointer w-14 h-8 bg-gray-700 rounded-full p-1 transition-colors duration-300 ease-in-out">
                            <div class="toggle-ball w-6 h-6 bg-white rounded-full shadow-md transform transition-transform duration-300 ease-in-out"></div>
                        </label>
                        <span class="font-semibold text-lg">3ê°œ ì¡°í•© ê³„ì‚°</span>
                    </div>
                </div>
                <!-- êµ´ë¦¬ê¸° ë²„íŠ¼ -->
                <button id="roll-button" class="w-full md:w-auto bg-blue-600 hover:bg-blue-700 transition-all duration-300 ease-in-out text-white font-bold py-3 px-10 rounded-lg text-xl shadow-lg hover:shadow-blue-500/50 transform hover:scale-105">
                    Roll Dice!
                </button>
            </div>
        </div>

        <!-- ê²°ê³¼ í‘œì‹œ ì˜ì—­ -->
        <div id="results-area" class="space-y-8">
            <!-- ì£¼ì‚¬ìœ„ êµ´ë¦¼ ê²°ê³¼ -->
            <div id="dice-roll-results-container" class="bg-gray-800/50 backdrop-blur-sm rounded-2xl p-6 shadow-xl shadow-blue-900/10 border border-gray-700 min-h-[120px]">
                <h2 class="text-xl font-bold mb-4 border-b border-gray-700 pb-2">ğŸ¯ ì£¼ì‚¬ìœ„ ê²°ê³¼</h2>
                <div id="dice-roll-results" class="flex flex-wrap gap-4 justify-center items-center">
                    <p class="text-gray-400">ì£¼ì‚¬ìœ„ë¥¼ ì„ íƒí•˜ê³  'Roll Dice!' ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”.</p>
                </div>
            </div>

            <!-- ê³„ì‚° ê²°ê³¼ -->
            <div id="calculation-results-container" class="bg-gray-800/50 backdrop-blur-sm rounded-2xl p-6 shadow-xl shadow-blue-900/10 border border-gray-700">
                <h2 class="text-xl font-bold mb-4 border-b border-gray-700 pb-2">ğŸ”¬ ê³„ì‚° ê²°ê³¼</h2>
                <div id="calculation-info"></div>
                <div id="calculation-results-wrapper" class="max-h-[400px] overflow-y-auto pr-2">
                    <table id="calculation-results-table" class="w-full text-left">
                        <thead>
                            <tr class="border-b border-gray-600">
                                <th class="p-2">ê³„ì‚°ì‹</th>
                                <th class="p-2 text-center">ê²°ê³¼</th>
                                <th class="p-2 text-center">ì›ì†Œê¸°í˜¸</th>
                                <th class="p-2">ì›ì†Œì´ë¦„</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="4" class="text-center p-8 text-gray-400">ê²°ê³¼ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // ì›ì†Œ ë°ì´í„° (1-118)
            const ELEMENTS = [
                { number: 1, symbol: 'H', name: 'ìˆ˜ì†Œ' }, { number: 2, symbol: 'He', name: 'í—¬ë¥¨' },
                { number: 3, symbol: 'Li', name: 'ë¦¬íŠ¬' }, { number: 4, symbol: 'Be', name: 'ë² ë¦´ë¥¨' },
                { number: 5, symbol: 'B', name: 'ë¶•ì†Œ' }, { number: 6, symbol: 'C', name: 'íƒ„ì†Œ' },
                { number: 7, symbol: 'N', name: 'ì§ˆì†Œ' }, { number: 8, symbol: 'O', name: 'ì‚°ì†Œ' },
                { number: 9, symbol: 'F', name: 'í”Œë£¨ì˜¤ë¦°' }, { number: 10, symbol: 'Ne', name: 'ë„¤ì˜¨' },
                { number: 11, symbol: 'Na', name: 'ë‚˜íŠ¸ë¥¨' }, { number: 12, symbol: 'Mg', name: 'ë§ˆê·¸ë„¤ìŠ˜' },
                { number: 13, symbol: 'Al', name: 'ì•Œë£¨ë¯¸ëŠ„' }, { number: 14, symbol: 'Si', name: 'ê·œì†Œ' },
                { number: 15, symbol: 'P', name: 'ì¸' }, { number: 16, symbol: 'S', name: 'í™©' },
                { number: 17, symbol: 'Cl', name: 'ì—¼ì†Œ' }, { number: 18, symbol: 'Ar', name: 'ì•„ë¥´ê³¤' },
                { number: 19, symbol: 'K', name: 'ì¹¼ë¥¨' }, { number: 20, symbol: 'Ca', name: 'ì¹¼ìŠ˜' },
                { number: 21, symbol: 'Sc', name: 'ìŠ¤ì¹¸ë“' }, { number: 22, symbol: 'Ti', name: 'íƒ€ì´íƒ€ëŠ„' },
                { number: 23, symbol: 'V', name: 'ë°”ë‚˜ë“' }, { number: 24, symbol: 'Cr', name: 'í¬ë¡œë®´' },
                { number: 25, symbol: 'Mn', name: 'ë§ê°€ë‹ˆì¦ˆ' }, { number: 26, symbol: 'Fe', name: 'ì² ' },
                { number: 27, symbol: 'Co', name: 'ì½”ë°œíŠ¸' }, { number: 28, symbol: 'Ni', name: 'ë‹ˆì¼ˆ' },
                { number: 29, symbol: 'Cu', name: 'êµ¬ë¦¬' }, { number: 30, symbol: 'Zn', name: 'ì•„ì—°' },
                { number: 31, symbol: 'Ga', name: 'ê°ˆë¥¨' }, { number: 32, symbol: 'Ge', name: 'ì €ë§ˆëŠ„' },
                { number: 33, symbol: 'As', name: 'ë¹„ì†Œ' }, { number: 34, symbol: 'Se', name: 'ì…€ë ˆëŠ„' },
                { number: 35, symbol: 'Br', name: 'ë¸Œë¡œë¯¼' }, { number: 36, symbol: 'Kr', name: 'í¬ë¦½í†¤' },
                { number: 37, symbol: 'Rb', name: 'ë£¨ë¹„ë“' }, { number: 38, symbol: 'Sr', name: 'ìŠ¤íŠ¸ë¡ íŠ¬' },
                { number: 39, symbol: 'Y', name: 'ì´íŠ¸ë¥¨' }, { number: 40, symbol: 'Zr', name: 'ì§€ë¥´ì½”ëŠ„' },
                { number: 41, symbol: 'Nb', name: 'ë‚˜ì´ì˜¤ë¸€' }, { number: 42, symbol: 'Mo', name: 'ëª°ë¦¬ë¸Œë°ë„˜' },
                { number: 43, symbol: 'Tc', name: 'í…Œí¬ë„¤íŠ¬' }, { number: 44, symbol: 'Ru', name: 'ë£¨í…ŒëŠ„' },
                { number: 45, symbol: 'Rh', name: 'ë¡œë“' }, { number: 46, symbol: 'Pd', name: 'íŒ”ë¼ë“' },
                { number: 47, symbol: 'Ag', name: 'ì€' }, { number: 48, symbol: 'Cd', name: 'ì¹´ë“œë®´' },
                { number: 49, symbol: 'In', name: 'ì¸ë“' }, { number: 50, symbol: 'Sn', name: 'ì£¼ì„' },
                { number: 51, symbol: 'Sb', name: 'ì•ˆí‹°ëª¨ë‹ˆ' }, { number: 52, symbol: 'Te', name: 'í…”ë£¨ë¥¨' },
                { number: 53, symbol: 'I', name: 'ì•„ì´ì˜¤ë”˜' }, { number: 54, symbol: 'Xe', name: 'ì œë…¼' },
                { number: 55, symbol: 'Cs', name: 'ì„¸ìŠ˜' }, { number: 56, symbol: 'Ba', name: 'ë°”ë¥¨' },
                { number: 57, symbol: 'La', name: 'ë€íƒ€ë„˜' }, { number: 58, symbol: 'Ce', name: 'ì„¸ë¥¨' },
                { number: 59, symbol: 'Pr', name: 'í”„ë¼ì„¸ì˜¤ë””ë®´' }, { number: 60, symbol: 'Nd', name: 'ë„¤ì˜¤ë””ë®´' },
                { number: 61, symbol: 'Pm', name: 'í”„ë¡œë©”íŠ¬' }, { number: 62, symbol: 'Sm', name: 'ì‚¬ë§ˆë¥¨' },
                { number: 63, symbol: 'Eu', name: 'ìœ ë¡œí“¸' }, { number: 64, symbol: 'Gd', name: 'ê°€ëŒë¦¬ëŠ„' },
                { number: 65, symbol: 'Tb', name: 'í„°ë¸€' }, { number: 66, symbol: 'Dy', name: 'ë””ìŠ¤í”„ë¡œìŠ˜' },
                { number: 67, symbol: 'Ho', name: 'í™€ë®´' }, { number: 68, symbol: 'Er', name: 'ì–´ë¸€' },
                { number: 69, symbol: 'Tm', name: 'íˆ´ë¥¨' }, { number: 70, symbol: 'Yb', name: 'ì´í„°ë¸€' },
                { number: 71, symbol: 'Lu', name: 'ë£¨í…ŒíŠ¬' }, { number: 72, symbol: 'Hf', name: 'í•˜í”„ëŠ„' },
                { number: 73, symbol: 'Ta', name: 'íƒ„íƒˆëŸ¼' }, { number: 74, symbol: 'W', name: 'í……ìŠ¤í…' },
                { number: 75, symbol: 'Re', name: 'ë ˆëŠ„' }, { number: 76, symbol: 'Os', name: 'ì˜¤ìŠ¤ë®´' },
                { number: 77, symbol: 'Ir', name: 'ì´ë¦¬ë“' }, { number: 78, symbol: 'Pt', name: 'ë°±ê¸ˆ' },
                { number: 79, symbol: 'Au', name: 'ê¸ˆ' }, { number: 80, symbol: 'Hg', name: 'ìˆ˜ì€' },
                { number: 81, symbol: 'Tl', name: 'íƒˆë¥¨' }, { number: 82, symbol: 'Pb', name: 'ë‚©' },
                { number: 83, symbol: 'Bi', name: 'ë¹„ìŠ¤ë¬´íŠ¸' }, { number: 84, symbol: 'Po', name: 'í´ë¡œëŠ„' },
                { number: 85, symbol: 'At', name: 'ì•„ìŠ¤íƒ€í‹´' }, { number: 86, symbol: 'Rn', name: 'ë¼ëˆ' },
                { number: 87, symbol: 'Fr', name: 'í”„ë‘ìŠ˜' }, { number: 88, symbol: 'Ra', name: 'ë¼ë“' },
                { number: 89, symbol: 'Ac', name: 'ì•…í‹°ëŠ„' }, { number: 90, symbol: 'Th', name: 'í† ë¥¨' },
                { number: 91, symbol: 'Pa', name: 'í”„ë¡œíŠ¸ì•…í‹°ëŠ„' }, { number: 92, symbol: 'U', name: 'ìš°ë¼ëŠ„' },
                { number: 93, symbol: 'Np', name: 'ë„µíˆ¬ëŠ„' }, { number: 94, symbol: 'Pu', name: 'í”Œë£¨í† ëŠ„' },
                { number: 95, symbol: 'Am', name: 'ì•„ë©”ë¦¬ìŠ˜' }, { number: 96, symbol: 'Cm', name: 'í€´ë¥¨' },
                { number: 97, symbol: 'Bk', name: 'ë²„í´ë¥¨' }, { number: 98, symbol: 'Cf', name: 'ìº˜ë¦¬í¬ëŠ„' },
                { number: 99, symbol: 'Es', name: 'ì•„ì¸ìŠˆíƒ€ì´ëŠ„' }, { number: 100, symbol: 'Fm', name: 'í˜ë¥´ë®´' },
                { number: 101, symbol: 'Md', name: 'ë©˜ë¸ë ˆë¸€' }, { number: 102, symbol: 'No', name: 'ë…¸ë²¨ë¥¨' },
                { number: 103, symbol: 'Lr', name: 'ë¡œë ŒìŠ˜' }, { number: 104, symbol: 'Rf', name: 'ëŸ¬ë”í¬ë“' },
                { number: 105, symbol: 'Db', name: 'ë”ë¸ŒëŠ„' }, { number: 106, symbol: 'Sg', name: 'ì‹œë³´ê·¬' },
                { number: 107, symbol: 'Bh', name: 'ë³´ë¥¨' }, { number: 108, symbol: 'Hs', name: 'í•˜ìŠ˜' },
                { number: 109, symbol: 'Mt', name: 'ë§ˆì´íŠ¸ë„ˆë¥¨' }, { number: 110, symbol: 'Ds', name: 'ë‹¤ë¦„ìŠˆíƒ€íŠ¬' },
                { number: 111, symbol: 'Rg', name: 'ë¢´íŠ¸ê²ŒëŠ„' }, { number: 112, symbol: 'Cn', name: 'ì½”í˜ë¥´ë‹ˆìŠ˜' },
                { number: 113, symbol: 'Nh', name: 'ë‹ˆí˜¸ëŠ„' }, { number: 114, symbol: 'Fl', name: 'í”Œë ˆë¡œë¸€' },
                { number: 115, 'symbol': 'Mc', name: 'ëª¨ìŠ¤ì½”ë¸€' }, { number: 116, symbol: 'Lv', name: 'ë¦¬ë²„ëª¨ë¥¨' },
                { number: 117, symbol: 'Ts', name: 'í…Œë„¤ì‹ ' }, { number: 118, symbol: 'Og', name: 'ì˜¤ê°€ë„¤ì†' }
            ];

            const DICE_TYPES = [4, 6, 8, 10, 12, 20, 100];
            const diceSelector = document.getElementById('dice-selector');
            const rollButton = document.getElementById('roll-button');
            const operatorToggle = document.getElementById('operator-toggle');
            const comboToggle = document.getElementById('combo-toggle');
            const diceRollResultsContainer = document.getElementById('dice-roll-results');
            const calcTableBody = document.querySelector('#calculation-results-table tbody');
            const calcInfo = document.getElementById('calculation-info');

            // ì£¼ì‚¬ìœ„ ì„ íƒ UI ìƒì„±
            DICE_TYPES.forEach(sides => {
                const id = `d${sides}`;
                const container = document.createElement('div');
                container.innerHTML = `
                    <input type="checkbox" id="${id}" value="${sides}" class="dice-checkbox hidden">
                    <label for="${id}" class="flex flex-col items-center justify-center w-full h-24 p-2 bg-gray-700/80 rounded-lg cursor-pointer border-2 border-transparent transition-all duration-300 ease-in-out hover:bg-gray-600/80 hover:border-blue-500">
                        <span class="text-3xl dice-icon transition-transform duration-300 ease-in-out">
                            ${getDiceIcon(sides)}
                        </span>
                        <span class="font-bold font-orbitron">d${sides}</span>
                    </label>
                `;
                diceSelector.appendChild(container);
            });

            function getDiceIcon(sides) {
                switch(sides) {
                    case 4: return 'â—­'; case 6: return 'ğŸ²'; case 8: return 'â¬Ÿ';
                    case 10: return 'â—†'; case 12: return 'â¬¢'; case 20: return 'â¬¡';
                    case 100: return '%'; default: return '?';
                }
            }
            
            class Dice {
                constructor(sides) { this.sides = sides; }
                roll() { return Math.floor(Math.random() * this.sides) + 1; }
            }

            rollButton.addEventListener('click', () => {
                const selectedDiceCheckboxes = document.querySelectorAll('.dice-checkbox:checked');
                if (selectedDiceCheckboxes.length === 0) {
                    const tempMsg = document.createElement('p');
                    tempMsg.className = 'text-yellow-400';
                    tempMsg.textContent = 'í•˜ë‚˜ ì´ìƒì˜ ì£¼ì‚¬ìœ„ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.';
                    diceRollResultsContainer.innerHTML = '';
                    diceRollResultsContainer.appendChild(tempMsg);
                    setTimeout(() => { if(diceRollResultsContainer.contains(tempMsg)) diceRollResultsContainer.innerHTML = '<p class="text-gray-400">ì£¼ì‚¬ìœ„ë¥¼ ì„ íƒí•˜ê³  \'Roll Dice!\' ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”.</p>'; }, 2000);
                    return;
                }

                rollButton.disabled = true;
                rollButton.textContent = 'Rolling...';
                diceRollResultsContainer.innerHTML = '';
                calcTableBody.innerHTML = '<tr><td colspan="4" class="text-center p-8 text-gray-400">ê³„ì‚° ì¤‘...</td></tr>';
                calcInfo.innerHTML = '';

                const diceToRoll = Array.from(selectedDiceCheckboxes).map(cb => new Dice(parseInt(cb.value)));
                const rollResults = [];
                let animationCompleted = 0;

                diceToRoll.forEach(dice => {
                    const resultDiv = document.createElement('div');
                    resultDiv.className = 'flex flex-col items-center justify-center bg-gray-900/70 w-24 h-24 rounded-lg p-2 shadow-inner';
                    resultDiv.innerHTML = `<div class="font-orbitron text-gray-400">d${dice.sides}</div><div class="text-4xl font-bold">?</div>`;
                    diceRollResultsContainer.appendChild(resultDiv);

                    const valueEl = resultDiv.querySelector('.text-4xl');
                    const animationInterval = setInterval(() => { valueEl.textContent = dice.roll(); }, 100);

                    setTimeout(() => {
                        clearInterval(animationInterval);
                        const finalValue = dice.roll();
                        rollResults.push(finalValue);
                        valueEl.textContent = finalValue;
                        valueEl.classList.add('text-blue-400', 'scale-125');
                        
                        animationCompleted++;
                        if (animationCompleted === diceToRoll.length) {
                            processCalculations(rollResults);
                            rollButton.disabled = false;
                            rollButton.textContent = 'Roll Dice!';
                        }
                    }, 1500 + Math.random() * 500);
                });
            });
            
            // ê³„ì‚° ì²˜ë¦¬ í•¨ìˆ˜
            function processCalculations(numbers) {
                if (numbers.length < 1) return;

                const useAdvancedOps = operatorToggle.checked;
                const useThreeCombos = comboToggle.checked;
                const operators = useAdvancedOps ? ['+', '-', '*', '/'] : ['+', '-'];
                let allResults = new Map();

                const maxCombo = useThreeCombos ? 3 : 2;
                
                const combinations = [];
                for (let k = 1; k <= Math.min(numbers.length, maxCombo); k++) {
                    combinations.push(...getCombinations(numbers, k));
                }

                const infoText = `êµ´ë ¤ì§„ ì£¼ì‚¬ìœ„ ê²°ê³¼ê°’ë“¤ì˜ ëª¨ë“  1~${maxCombo}ê°œ ì¡°í•©ì— ëŒ€í•´ ê³„ì‚°í•©ë‹ˆë‹¤.`;
                calcInfo.innerHTML = `<p class="text-sm text-yellow-300 mb-3 p-3 bg-yellow-900/50 rounded-md border border-yellow-700/50">â„¹ï¸ <strong>ê³„ì‚° ì•ˆë‚´:</strong> ${infoText}</p>`;

                combinations.forEach(combo => {
                    const numberPermutations = getPermutations(combo);
                    numberPermutations.forEach(numPerm => {
                        generateExpressionResults(numPerm, operators, allResults);
                    });
                });

                const sortedResults = Array.from(allResults.values())
                    .filter(r => Number.isInteger(r.value) && r.value > 0 && r.value <= 118)
                    .sort((a, b) => a.value - b.value);

                renderResults(sortedResults);
            }
            
            function generateExpressionResults(numbers, operators, resultsMap, currentExpr = '', index = 0) {
                currentExpr += numbers[index];

                if (index === numbers.length - 1) {
                    try {
                        const value = evaluateExpression(currentExpr);
                        if (!resultsMap.has(value)) {
                           resultsMap.set(value, { expression: currentExpr, value: value });
                        }
                    } catch (e) { /* 0ìœ¼ë¡œ ë‚˜ëˆ„ê¸° ë“± ì˜¤ë¥˜ ë¬´ì‹œ */ }
                    return;
                }

                operators.forEach(op => {
                    generateExpressionResults(numbers, operators, resultsMap, `${currentExpr} ${op} `, index + 1);
                });
            }
            
            // ì¢Œ->ìš° ìˆœì„œë¡œ ì‚¬ì¹™ì—°ì‚° ê³„ì‚° (ê´„í˜¸ ì—†ìŒ)
            function evaluateExpression(expr) {
                const tokens = expr.split(' ');
                let value = parseFloat(tokens[0]);
                for (let i = 1; i < tokens.length; i += 2) {
                    const operator = tokens[i];
                    const nextValue = parseFloat(tokens[i + 1]);
                    switch (operator) {
                        case '+': value += nextValue; break;
                        case '-': value -= nextValue; break;
                        case '*': value *= nextValue; break;
                        case '/': 
                            if (nextValue === 0) throw new Error('Division by zero');
                            value = Math.floor(value / nextValue); // ëª«ë§Œ ì·¨í•¨
                            break;
                    }
                }
                return value;
            }

            function renderResults(results) {
                calcTableBody.innerHTML = '';
                if (results.length === 0) {
                    calcTableBody.innerHTML = '<tr><td colspan="4" class="text-center p-8 text-gray-400">ê³„ì‚° ê²°ê³¼ ì¤‘ ì›ì†Œ ë²ˆí˜¸ì— í•´ë‹¹í•˜ëŠ” ê°’ì´ ì—†ìŠµë‹ˆë‹¤.</td></tr>';
                    return;
                }

                results.forEach(res => {
                    const element = ELEMENTS.find(e => e.number === res.value);
                    if (element) {
                        const row = document.createElement('tr');
                        row.className = 'border-b border-gray-700/50 hover:bg-gray-700/70 transition-colors duration-200';
                        row.innerHTML = `
                            <td class="p-2 font-mono">${res.expression}</td>
                            <td class="p-2 text-center font-bold text-blue-300">${res.value}</td>
                            <td class="p-2 text-center font-bold font-orbitron text-lg">${element.symbol}</td>
                            <td class="p-2">${element.name}</td>
                        `;
                        calcTableBody.appendChild(row);
                    }
                });
            }
            
            function getPermutations(arr) {
                if (arr.length === 0) return [[]];
                const firstEl = arr[0];
                const rest = arr.slice(1);
                const permsWithoutFirst = getPermutations(rest);
                const allPermutations = [];
                permsWithoutFirst.forEach(perm => {
                    for (let i = 0; i <= perm.length; i++) {
                        const permWithFirst = [...perm.slice(0, i), firstEl, ...perm.slice(i)];
                        allPermutations.push(permWithFirst);
                    }
                });
                return allPermutations;
            }

            function getCombinations(array, k) {
                const result = [];
                function comb(startIndex, currentComb) {
                    if (currentComb.length === k) {
                        result.push([...currentComb]);
                        return;
                    }
                    if (startIndex >= array.length) return;
                    
                    currentComb.push(array[startIndex]);
                    comb(startIndex + 1, currentComb);
                    currentComb.pop();
                    comb(startIndex + 1, currentComb);
                }
                comb(0, []);
                return result;
            }
        });
    </script>
</body>
</html>
